# =============================================================================
# DATABASE
# =============================================================================

# Connection string used by the API when running outside Docker (e.g. local dev)
DB_CONNECTION_STRING=Host=host.docker.internal;Port=5432;Database=homassy_db;Username=your_username;Password=your_password

# Connection string used by the API container inside Docker (hostname = service name)
DB_CONNECTION_STRING_DOCKER=Host=postgres;Port=5432;Database=homassy_db;Username=your_username;Password=your_password

# PostgreSQL container initialisation – also consumed by the Migrator and API containers
POSTGRES_DB=homassy            # Name of the main application database
POSTGRES_USER=homassy_user     # PostgreSQL superuser for the app database
POSTGRES_PASSWORD=             # Strong password – keep secret
POSTGRES_KRATOS_DB=kratos      # Separate database used exclusively by Ory Kratos
DATABASE_HOST=postgres         # Docker service name of the PostgreSQL container
DATABASE_PORT=5432             # PostgreSQL port (default: 5432)

# =============================================================================
# ORY KRATOS (IDENTITY & AUTH)
# =============================================================================

# Signing secrets – MUST be at least 32 characters and changed before going to production
KRATOS_COOKIE_SECRET=PLEASE-CHANGE-ME-I-AM-VERY-INSECURE!
KRATOS_CIPHER_SECRET=PLEASE-CHANGE-ME-I-AM-VERY-INSECURE!

# Public-facing URL of Kratos (called from the browser)
KRATOS_PUBLIC_URL=https://kratos.yourdomain.com

# Internal admin API URL of Kratos (called from backend services only, not exposed publicly)
KRATOS_ADMIN_URL=http://homassy-kratos:4434

# Where the browser is redirected after a successful login/registration flow
KRATOS_BROWSER_RETURN_URL=https://app.yourdomain.com

# Allowed CORS origin for Kratos API responses
KRATOS_CORS_ORIGIN=https://app.yourdomain.com

# WebAuthn relying-party ID – must match the effective domain (no port, no scheme)
KRATOS_WEBAUTHN_RP_ID=yourdomain.com

# Full origin URL used during WebAuthn credential registration and assertion
KRATOS_WEBAUTHN_ORIGIN=https://app.yourdomain.com

# Cookie domain – use a leading dot to share the session across subdomains
KRATOS_COOKIE_DOMAIN=.yourdomain.com

# =============================================================================
# EMAIL (SMTP + MICROSERVICE)
# =============================================================================

# SMTP server hostname
EMAIL_SMTP_SERVER=smtp.gmail.com

# SMTP port (587 = STARTTLS, 465 = SSL/TLS)
EMAIL_SMTP_PORT=587

# The "From" address that appears in outgoing emails
EMAIL_SENDER_EMAIL=noreply@yourdomain.com

# SMTP authentication credentials
EMAIL_USERNAME=
EMAIL_PASSWORD=

# Shared secret between Kratos courier, Homassy.API and the Email microservice
# Generate with: openssl rand -hex 32
EMAIL_SERVICE_API_KEY=generate-a-strong-random-key-here

# =============================================================================
# NOTIFICATIONS MICROSERVICE
# =============================================================================

# Shared secret used by Homassy.API when proxying push-notification requests
# Generate with: openssl rand -hex 32
NOTIFICATIONS_SERVICE_API_KEY=generate-a-strong-random-key-here

# =============================================================================
# WEB PUSH (VAPID)
# =============================================================================

# Generate a new key-pair with: npx web-push generate-vapid-keys

# Contact URI included in VAPID headers (mailto: or https:)
VAPID_SUBJECT=mailto:noreply@yourdomain.com

# VAPID public key – sent to the browser when subscribing to push notifications
VAPID_PUBLIC_KEY=

# VAPID private key – kept on the server, never exposed to the browser
VAPID_PRIVATE_KEY=

# =============================================================================
# APPLICATION
# =============================================================================

# Whether new users can register (set to false to lock down the instance)
REGISTRATION_ENABLED=true

# JWT signing secret used by the API to issue access tokens
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=generate-a-strong-random-key-here

# =============================================================================
# DEPLOYMENT
# =============================================================================

# Absolute path on the VPS where the project will be deployed
DEPLOY_PATH=/opt/homassy

# =============================================================================
# FRONTEND (Nuxt)
# =============================================================================

# Base URL of the API that the Nuxt app calls at runtime
NUXT_PUBLIC_API_BASE=http://localhost:5226

# Public URL of the Kratos instance (called from the browser)
NUXT_PUBLIC_KRATOS_URL=http://localhost:4433

# =============================================================================
# VPS DEPLOYMENT (deploy-to-vps.sh)
# =============================================================================

# SSH username on the remote server
VPS_USER=root

# Hostname or IP address of the remote server
VPS_HOST=your-vps-hostname-or-ip

# SSH port on the remote server (default: 22)
VPS_PORT=22

# Path to a local SSH private key file – leave empty to use the SSH agent or password
VPS_SSH_KEY=

# SSH password – leave empty when using a key (requires sshpass: brew install hudochenkov/sshpass/sshpass)
VPS_PASSWORD=

# Production API base URL (used by Nuxt and health checks after deployment)
VPS_API_BASE=https://homassyapi.yourdomain.com/

# Production Kratos public URL (used by Nuxt after deployment)
VPS_KRATOS_URL=https://kratos.yourdomain.com/
